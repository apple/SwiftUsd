{"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/CheatSheet"},"metadata":{"role":"article","roleHeading":"Article","modules":[{"name":"OpenUSD"}],"title":"Cheat sheet"},"abstract":[{"type":"text","text":"Tips for advanced users modifying this repo"}],"variants":[{"paths":["\/documentation\/swiftusd\/cheatsheet"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/swiftusd\/cheatsheet"],"traits":[{"interfaceLanguage":"occ"}]}],"kind":"article","sections":[],"seeAlsoSections":[{"generated":true,"title":"About this repo","identifiers":["doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ChangeLog","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/OngoingWork","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/UpgradeChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ReleaseChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/Miscellaneous"],"anchor":"About-this-repo"}],"hierarchy":{"paths":[["doc:\/\/SwiftUsd\/documentation\/OpenUSD"]]},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","text":"Overview","anchor":"Overview","level":2},{"type":"paragraph","inlineContent":[{"type":"text","text":"This page contains some useful Terminal commands for working on this repo. If you’re just trying to use OpenUSD in Swift, the information here won’t be helpful. Most users should ignore this page."}]},{"type":"heading","text":"Documentation","anchor":"Documentation","level":3},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"swift package generate-documentation"},{"type":"text","text":" runs into issues with SwiftUsd. (See "},{"type":"reference","isActive":true,"identifier":"https:\/\/github.com\/swiftlang\/swift-docc-plugin\/issues\/80"},{"type":"text","text":".) Instead, "},{"type":"codeVoice","code":"SwiftUsd"},{"type":"text","text":" provides its own workflow for building, previewing, and publishing documentation."}]},{"type":"heading","text":"Building documentation","anchor":"Building-documentation","level":4},{"type":"paragraph","inlineContent":[{"type":"text","text":"To build the DocC symbol graphs, run:"}]},{"type":"codeListing","code":["cd ~\/SwiftUsd","swift run --package-path scripts\/docc build-documentation"],"syntax":"zsh"},{"type":"paragraph","inlineContent":[{"type":"text","text":"This will take several minutes, and create a "},{"type":"codeVoice","code":"Package.resolved"},{"type":"text","text":" file, a "},{"type":"codeVoice","code":".build"},{"type":"text","text":" directory, and a "},{"type":"codeVoice","code":".symbol-graphs"},{"type":"text","text":" directory."}]},{"type":"aside","style":"note","content":[{"type":"paragraph","inlineContent":[{"text":"Note, even if ","type":"text"},{"code":"swift package generate-documentation","type":"codeVoice"},{"text":" starts working, using ","type":"text"},{"code":"scripts\/docc build-documentation","type":"codeVoice"},{"text":" is still the recommended approach, because it also manipulates the symbol graphs to look nicer for Swift-Cxx interop (e.g. hiding the long Pixar internal namespace, hiding C++ DocC workarounds) in addition to symlinking generated markdown files into the documentation catalog.","type":"text"}]}],"name":"Note"},{"type":"heading","text":"Previewing documentation","anchor":"Previewing-documentation","level":4},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Prerequisite: You already ran ","type":"text"},{"type":"codeVoice","code":"build-documentation"},{"text":".","type":"text"},{"text":"\n","type":"text"},{"text":"To preview the DocC documentation locally, run:","type":"text"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["cd ~\/SwiftUsd","swift run --package-path scripts\/docc preview-documentation"],"syntax":"zsh"},{"type":"paragraph","inlineContent":[{"text":"This script will automatically open a window in your web browser viewing the locally hosted documentation. You can modify the markdown files in the documentation catalog and the preview will automatically update. (You may need to refresh the page, and the updating may take a few seconds.)","type":"text"}]},{"type":"heading","text":"Publishing documentation","anchor":"Publishing-documentation","level":4},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Prerequisite: You already ran ","type":"text"},{"type":"codeVoice","code":"build-documentation"},{"text":".","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Prerequisite: You already ran ","type":"text"},{"code":"preview-documentation","type":"codeVoice"},{"text":" and there were no documentation warnings or errors.","type":"text"},{"text":"\n","type":"text"},{"text":"To update the published documentation, run:","type":"text"}]}]}]},{"type":"codeListing","code":["cd ~\/SwiftUsd","swift run --package-path scripts\/docc update-documentation"],"syntax":"zsh"},{"type":"paragraph","inlineContent":[{"text":"This script will update the ","type":"text"},{"code":"SwiftUsd.doccarchive","type":"codeVoice"},{"text":" that is viewable locally in Xcode, as well as the ","type":"text"},{"code":"docs","type":"codeVoice"},{"text":" directory that powers the online documentation hosted at ","type":"text"},{"isActive":true,"type":"reference","identifier":"https:\/\/apple.github.io\/SwiftUsd\/documentation\/openusd\/"},{"text":".","type":"text"}]},{"type":"heading","text":"Patches","anchor":"Patches","level":3},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Prerequisite: "},{"type":"codeVoice","code":"~\/OpenUSD"},{"type":"text","text":" is an unmodified version of OpenUSD."}]}]},{"content":[{"inlineContent":[{"text":"Prerequisite: You’ve already cloned OpenUSD to ","type":"text"},{"type":"codeVoice","code":"SwiftUsd\/openusd-source"},{"text":".","type":"text"}],"type":"paragraph"}]}]},{"type":"heading","text":"Generating a new patch","anchor":"Generating-a-new-patch","level":4},{"type":"codeListing","code":["cd ~\/SwiftUsd\/openusd-source","diff -Nura \\","    --exclude .git --exclude '*.orig' \\","    --exclude .DS_Store --exclude '*.pyc' \\","    ~\/OpenUSD . > ~\/Desktop\/wip.patch"],"syntax":"zsh"},{"type":"heading","text":"Viewing the list of files changed from OpenUSD","anchor":"Viewing-the-list-of-files-changed-from-OpenUSD","level":4},{"type":"codeListing","code":["cd ~\/SwiftUsd\/openusd-source","diff -Nqra \\","    --exclude .git --exclude '*.orig' \\","    --exclude .DS_Store --exclude '*.pyc' \\","    ~\/OpenUSD ."],"syntax":"zsh"},{"type":"heading","text":"Comparing the differences between an old patch and a new patch","anchor":"Comparing-the-differences-between-an-old-patch-and-a-new-patch","level":4},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Prerequisite: You generated a new patch at ","type":"text"},{"type":"codeVoice","code":"~\/Desktop\/wip.patch"}],"type":"paragraph"}]}]},{"type":"codeListing","code":["diff -ua \\","    -I '^(diff |\\+\\+\\+ |--- |@@ |\\ | )' \\","    ~\/SwiftUsd\/openusd-patch.patch ~\/Desktop\/wip.patch"],"syntax":"zsh"},{"type":"heading","text":"Reviewing commit changes","anchor":"Reviewing-commit-changes","level":3},{"type":"codeListing","code":["git status \":(exclude)docs\/*\" \":(exclude)SwiftUsd.doccarchive\/*\" \":(exclude)swift-package\/XCFrameworks\/*.xcframework\/Info.plist\"","git diff \":(exclude)docs\/*\" \":(exclude)SwiftUsd.doccarchive\/*\" \":(exclude)swift-package\/XCFrameworks\/*.xcframework\/Info.plist\""],"syntax":"zsh"},{"type":"heading","text":"Grep","anchor":"Grep","level":3},{"type":"paragraph","inlineContent":[{"type":"text","text":"Grepping for text in the entire package will likely pull up useless matches from various hidden directories and build artifacts. To get more relevant matches, use something like this:"}]},{"type":"codeListing","code":["grep SEARCHPATTERN -r scripts source SwiftUsd.docc Package.swift --exclude-dir={.docc-build,.build}"],"syntax":"zsh"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"references":{"doc://SwiftUsd/documentation/OpenUSD":{"type":"topic","url":"\/documentation\/openusd","title":"OpenUSD","role":"collection","abstract":[],"kind":"symbol","identifier":"doc:\/\/SwiftUsd\/documentation\/OpenUSD"},"doc://SwiftUsd/documentation/SwiftUsd/OngoingWork":{"role":"article","url":"\/documentation\/swiftusd\/ongoingwork","title":"Ongoing Work","identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/OngoingWork","type":"topic","kind":"article","abstract":[{"type":"text","text":"In-progress and future tasks for improving OpenUSD in Swift"}]},"doc://SwiftUsd/documentation/SwiftUsd/ChangeLog":{"kind":"article","role":"article","title":"Change Log","url":"\/documentation\/swiftusd\/changelog","abstract":[{"type":"text","text":"Changes to SwiftUsd"}],"type":"topic","identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ChangeLog"},"doc://SwiftUsd/documentation/SwiftUsd/Miscellaneous":{"kind":"article","role":"article","title":"Miscellaneous","url":"\/documentation\/swiftusd\/miscellaneous","abstract":[{"type":"text","text":"Miscellaneous details about this repo"}],"type":"topic","identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/Miscellaneous"},"doc://SwiftUsd/documentation/SwiftUsd/ReleaseChecklist":{"kind":"article","role":"article","title":"Release Checklist","url":"\/documentation\/swiftusd\/releasechecklist","abstract":[{"type":"text","text":"Checklist for releasing new versions of SwiftUsd"}],"type":"topic","identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ReleaseChecklist"},"doc://SwiftUsd/documentation/SwiftUsd/UpgradeChecklist":{"kind":"article","role":"article","title":"Upgrade Checklist","url":"\/documentation\/swiftusd\/upgradechecklist","abstract":[{"type":"text","text":"Checklist for upgrading SwiftUsd to be based on a new OpenUSD version"}],"type":"topic","identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/UpgradeChecklist"},"https://github.com/swiftlang/swift-docc-plugin/issues/80":{"type":"link","title":"here","identifier":"https:\/\/github.com\/swiftlang\/swift-docc-plugin\/issues\/80","titleInlineContent":[{"type":"text","text":"here"}],"url":"https:\/\/github.com\/swiftlang\/swift-docc-plugin\/issues\/80"},"https://apple.github.io/SwiftUsd/documentation/openusd/":{"url":"https:\/\/apple.github.io\/SwiftUsd\/documentation\/openusd\/","identifier":"https:\/\/apple.github.io\/SwiftUsd\/documentation\/openusd\/","title":"https:\/\/apple.github.io\/SwiftUsd\/documentation\/openusd\/","titleInlineContent":[{"type":"text","text":"https:\/\/apple.github.io\/SwiftUsd\/documentation\/openusd\/"}],"type":"link"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"value":"occ","path":"\/identifier\/interfaceLanguage","op":"replace"},{"value":null,"path":"\/topicSections","op":"add"},{"value":[{"anchor":"About-this-repo","title":"About this repo","identifiers":["doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ChangeLog","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/OngoingWork","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/UpgradeChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ReleaseChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/Miscellaneous"],"generated":true}],"path":"\/seeAlsoSections","op":"replace"}]}]}