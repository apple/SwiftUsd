{"sections":[],"abstract":[{"type":"text","text":"In-progress and future tasks for improving OpenUSD in Swift"}],"kind":"article","variants":[{"paths":["\/documentation\/swiftusd\/ongoingwork"],"traits":[{"interfaceLanguage":"swift"}]},{"paths":["\/documentation\/swiftusd\/ongoingwork"],"traits":[{"interfaceLanguage":"occ"}]}],"identifier":{"url":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/OngoingWork","interfaceLanguage":"swift"},"schemaVersion":{"patch":0,"major":0,"minor":3},"primaryContentSections":[{"kind":"content","content":[{"type":"heading","level":2,"text":"Overview","anchor":"Overview"},{"type":"paragraph","inlineContent":[{"text":"SwiftUsd is currently a work-in-progress. Here is a list of potential future improvements, organized by topic.","type":"text"}]},{"type":"heading","level":3,"text":"Ease of set up","anchor":"Ease-of-set-up"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Include visionOS, tvOS, simulators in XCFrameworks"}]}]}]},{"type":"heading","level":3,"text":"Small items","anchor":"Small-items"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Add missing ","type":"text"},{"code":"SWIFT_NONMUTATING","type":"codeVoice"},{"text":":","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"pxr.UsdInherits","type":"codeVoice"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"pxr.UsdPrim.RemoveProperty"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"pxr.UsdGeomPrimvar","type":"codeVoice"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"pxr.UsdGeomBboxCache","type":"codeVoice"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"Investigate what happens when you’re iterating over a range backed by a stage that closes during iteration"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Simplify ","type":"text"},{"code":"Sequence","type":"codeVoice"},{"text":"\/","type":"text"},{"code":"Collection","type":"codeVoice"},{"text":" conformances, replacing with ","type":"text"},{"code":"CxxSequence","type":"codeVoice"},{"text":" where possible","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Can upstream warnings in SwiftUsd can be hidden from downstream clients?","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Does API Notes support renaming extern variables, e.g. for "},{"code":"pxr::TfStaticData","type":"codeVoice"},{"type":"text","text":"?"}],"type":"paragraph"}]}]},{"type":"heading","level":3,"text":"Medium items","anchor":"Medium-items"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Paper over ","type":"text"},{"code":"pxr::UsdSchemaBase::GetPrim()","type":"codeVoice"},{"text":" by renaming the method and extending each subclass to have a definition of it.","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Investigate adding "},{"type":"codeVoice","code":"requires cplusplus"},{"type":"text","text":" in the modulemap, which may or may not improve code completion"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Why wasn’t the typedef ","type":"text"},{"type":"codeVoice","code":"pxr::SdfLayer::FileFormatArguments"},{"text":" found by ast-answerer?","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add an unavailable Swift struct ","type":"text"},{"code":"pxr.UsdEditContext","type":"codeVoice"},{"text":" that redirects to ","type":"text"},{"code":"Overlay.withUsdEditContext(_:_:_:)","type":"codeVoice"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Should ","type":"text"},{"type":"codeVoice","code":"extension pxr.TfToken: ExpressibleByStringLiteral"},{"text":" be removed?","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"C++ doesn’t support that even though Python does"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Should ","type":"text"},{"type":"codeVoice","code":"ExpressibleByStringLiteral"},{"text":"-constructed tokens be immortal instead?","type":"text"}]}]}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Add support for casting between UsdSchemaBase subclasses"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Expose VTOPERATOR_CPPARRAY, i.e. math operators on VtArray specializations, to Swift"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Import nested TfRefBase subclasses as SWIFT_SHARED_REFERENCE","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Add "},{"code":"CustomDebugStringConvertible","type":"codeVoice"},{"type":"text","text":" and "},{"code":"@DebugDescription","type":"codeVoice"},{"type":"text","text":" for Usd types"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Investigate papering over Overlay enum wrapping by extern consting the values in "},{"type":"codeVoice","code":"PXR_NS"},{"type":"text","text":" with a different name, then "},{"type":"codeVoice","code":"swift_name"},{"type":"text","text":"ing them to what users expect?"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If that doesn’t work, investigate API notes enum case renaming to paper over enum wrapping"}]}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Investigate automatically wrapping missing operator auto-conversion initializers, e.g. "},{"type":"codeVoice","code":"pxr::UsdGeomPrimvar::operator UsdAttribute()"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Investigate automatically wrapping missing math operators"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Automatically generate "},{"type":"codeVoice","code":"Bool(_:)"},{"type":"text","text":" initializers for C++ types with a suitable "},{"type":"codeVoice","code":"operator bool() const"},{"type":"text","text":"-like operator"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"type":"text","text":"Add support for TfNotice in Swift on Linux"}],"type":"paragraph"}]}]},{"type":"heading","level":3,"text":"Big items","anchor":"Big-items"},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Investigate if immortal\/singleton types (TfSingleton, TfStaticData, various Usd registries) can be imported as immortal types in Swift","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Investigate if using ImportAsMember could reduce Swift compile times, and how it interacts with default arguments","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Investigate automatically wrapping non-imported types (i.e. non-moveable non-reference types)","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Remove ","type":"text"},{"code":"pxr::TfRefPtr","type":"codeVoice"},{"text":" and ","type":"text"},{"code":"pxr::TfWeakPtr","type":"codeVoice"},{"text":" completely from Swift using API notes in Swift 6.1","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Nullability heuristics. Are arguments typically nonnull, and return values typically nullable? Are there functions where passing a null smart pointer isn’t a misuse of the API and isn’t a noop?"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add support for SwiftUI views using Usd types via custom Swift macros + TfNotice"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Should propagate to computed properties and function bodies in views"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Should be able to wire up a model to observation tracking, so app models that vend wrapper types for Usd data are compatible","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Use macros in unit tests to catch observation keypaths by tracking the same way SwiftUI does"}]}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add support for custom file format plugins implemented in Swift"}]},{"items":[{"content":[{"inlineContent":[{"text":"Requires supporting static initialization in Swift via ","type":"text"},{"code":"@_section","type":"codeVoice"},{"text":". Could probably be wrapped in a macro","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strikethrough","inlineContent":[{"type":"text","text":"Investigate if SwiftUsd works on Linux"}]}]},{"type":"unorderedList","items":[{"content":[{"inlineContent":[{"text":"Experimental Linux support added in SwiftUsd 2.0.1","type":"text"}],"type":"paragraph"}]}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add Swift function body macros for validity warning","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add Swift DSL for inline stage building","type":"text"}]},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"Should support usda -> DSL conversion","type":"text"}]}]}],"type":"unorderedList"}]},{"content":[{"inlineContent":[{"type":"text","text":"Find a better solution for making "},{"type":"codeVoice","code":"pxr::Foo"},{"type":"text","text":" work nicely in Swift"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add support for embedding custom OpenUSD plugins in SwiftUsd builds"}]}]}]}]}],"seeAlsoSections":[{"anchor":"About-this-repo","title":"About this repo","identifiers":["doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ChangeLog","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/CheatSheet","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/UpgradeChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ReleaseChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/Miscellaneous"],"generated":true}],"metadata":{"role":"article","modules":[{"name":"OpenUSD"}],"title":"Ongoing Work","roleHeading":"Article"},"hierarchy":{"paths":[["doc:\/\/SwiftUsd\/documentation\/OpenUSD"]]},"references":{"doc://SwiftUsd/documentation/SwiftUsd/ReleaseChecklist":{"identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ReleaseChecklist","kind":"article","url":"\/documentation\/swiftusd\/releasechecklist","type":"topic","title":"Release Checklist","abstract":[{"text":"Checklist for releasing new versions of SwiftUsd","type":"text"}],"role":"article"},"doc://SwiftUsd/documentation/SwiftUsd/Miscellaneous":{"identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/Miscellaneous","type":"topic","abstract":[{"type":"text","text":"Miscellaneous details about this repo"}],"url":"\/documentation\/swiftusd\/miscellaneous","kind":"article","role":"article","title":"Miscellaneous"},"doc://SwiftUsd/documentation/SwiftUsd/CheatSheet":{"identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/CheatSheet","type":"topic","abstract":[{"type":"text","text":"Tips for advanced users modifying this repo"}],"url":"\/documentation\/swiftusd\/cheatsheet","kind":"article","role":"article","title":"Cheat sheet"},"doc://SwiftUsd/documentation/SwiftUsd/UpgradeChecklist":{"identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/UpgradeChecklist","type":"topic","abstract":[{"type":"text","text":"Checklist for upgrading SwiftUsd to be based on a new OpenUSD version"}],"url":"\/documentation\/swiftusd\/upgradechecklist","kind":"article","role":"article","title":"Upgrade Checklist"},"doc://SwiftUsd/documentation/OpenUSD":{"title":"OpenUSD","abstract":[],"url":"\/documentation\/openusd","kind":"symbol","type":"topic","role":"collection","identifier":"doc:\/\/SwiftUsd\/documentation\/OpenUSD"},"doc://SwiftUsd/documentation/SwiftUsd/ChangeLog":{"type":"topic","url":"\/documentation\/swiftusd\/changelog","kind":"article","title":"Change Log","identifier":"doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ChangeLog","abstract":[{"type":"text","text":"Changes to SwiftUsd"}],"role":"article"}},"variantOverrides":[{"traits":[{"interfaceLanguage":"occ"}],"patch":[{"value":"occ","op":"replace","path":"\/identifier\/interfaceLanguage"},{"value":null,"op":"add","path":"\/topicSections"},{"value":[{"generated":true,"title":"About this repo","identifiers":["doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ChangeLog","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/CheatSheet","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/UpgradeChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/ReleaseChecklist","doc:\/\/SwiftUsd\/documentation\/SwiftUsd\/Miscellaneous"],"anchor":"About-this-repo"}],"op":"replace","path":"\/seeAlsoSections"}]}]}